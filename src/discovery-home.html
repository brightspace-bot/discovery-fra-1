<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="./mixins/localize-mixin.html">
<link rel="import" href="./mixins/route-locations-mixin.html">

<link rel="import" href="./components/search-header.html">
<link rel="import" href="./components/course-card.html">

<link rel="import" href="styles/discovery-styles.html">

<dom-module id="discovery-home">
  <template>
    <style include="discovery-styles"></style>
    <style>
      :host {
        display: inline;
      }
      
      .main {
        padding: 1.5rem;
        overflow: auto;
      }

      .container {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        margin: -1.5rem;
        padding-bottom: 1rem;
      }

      .topHeader {
        margin-top: 0 !important;
      }

      .cards {
        margin: 1.5rem;
      }
    </style>

    <app-route
      route="{{route}}"
      pattern="/d2l/le/discovery/view/home"
      data="{{routeData}}">
    </app-route>

    <div>
      <search-header query="{{searchQuery}}"></search-header>
    </div>

    <div class="d2l-typography main">
      <h1 class="d2l-heading-1 topHeader">[[localize('recommendationHeader')]]</h1>

      <div>
        <h3 class="d2l-heading-3">[[localize('jobTitleHeader')]] [[jobTitle]]</h3>
        <div class="container">
          <template is="dom-repeat" items="[[jobTitleCourses]]">
            <div class="cards">
              <course-card
                course-id="{{item.id}}"
                course-title="[[item.title]]"
                course-description="[[item.description]]"
                course-thumbnail-link="[[item.thumbnail]]"
                course-duration="[[item.duration]]"
                course-tags="[[item.tags]]">
              </course-card>
            </div>
          </template>
        </div>
      </div>

      <div>
        <h3 class="d2l-heading-3">[[localize('listHeader')]]</h3>
        <div class="container">
          <template is="dom-repeat" items="[[listCourses]]">
            <div class="cards">
              <course-card
                course-id="{{item.id}}"
                course-title="[[item.title]]"
                course-description="[[item.description]]"
                course-thumbnail-link="[[item.thumbnail]]"
                course-duration="[[item.duration]]"
                course-tags="[[item.tags]]">
              </course-card>
            </div>
          </template>
        </div>
      </div>

      <div>
        <h3 class="d2l-heading-3">[[localize('departmentHeader')]] [[department]]</h3>
        <div class="container">
          <template is="dom-repeat" items="[[departmentCourses]]">
            <div class="cards">
              <course-card
                course-id="{{item.id}}"
                course-title="[[item.title]]"
                course-description="[[item.description]]"
                course-thumbnail-link="[[item.thumbnail]]"
                course-duration="[[item.duration]]"
                course-tags="[[item.tags]]">
              </course-card>
            </div>
          </template>
        </div>
      </div>

      <div>
        <h3 class="d2l-heading-3">[[localize('locationHeader')]] [[location]]</h3>
        <div class="container">
          <template is="dom-repeat" items="[[locationCourses]]">
            <div class="cards">
              <course-card
                course-id="{{item.id}}"
                course-title="[[item.title]]"
                course-description="[[item.description]]"
                course-thumbnail-link="[[item.thumbnail]]"
                course-duration="[[item.duration]]"
                course-tags="[[item.tags]]">
              </course-card>
            </div>
          </template>
        </div>
      </div>
      
    </div>
  </template>

  <script>
    class DiscoveryHome extends
      D2L.Discovery.LocalizeMixin(
      D2L.Discovery.RouteLocationsMixin(Polymer.Element)) {

      static get is() {
        return 'discovery-home';
      }

      static get properties() {
        return {
          route: Object,
          routeData: Object,

          visible: {
            type: Boolean,
            observer: '_visible'
          },

          searchQuery: String,

          jobTitle: String,
          department: String,
          location: String,

          jobTitleCourses: Array,
          listCourses: Array,
          departmentCourses: Array,
          locationCourses: Array,

        };
      }

      _visible(newVal) {
        this.searchQuery = "";

        // data for recommended courses
        this.jobTitle = 'job title';
        this.department = 'department';
        this.location = 'location';

        const thumbnailLink = "https://www.d2l.com/wp-content/uploads/2017/02/img_D2L_knockout.jpg";

        this.jobTitleCourses = [
          { 
            title: 'jobTitleCourseALotsOfCharacters And Spaces | jobTitleCourseALotsOfCharacters And Spaces | jobTitleCourseALotsOfCharacters And Spaces | jobTitleCourseALotsOfCharacters And Spaces',
            id: 1000,
            description: "job title course a description. has lots of words and hopefully it's multi-lined. | job title course a description. has lots of words and hopefully it's multi-lined. | job title course a description. has lots of words and hopefully it's multi-lined. | job title course a description. has lots of words and hopefully it's multi-lined.",
            thumbnail: thumbnailLink,
            duration: 60,
            tags: ['Stocks', 'Finance', 'Marketing'],
          },
          { 
            title: 'jobTitleCourseB',
            id: 1001,
            description: '',
            thumbnail: thumbnailLink,
            duration: 30,
            tags: [],
          },
        ];
        this.listCourses = [
          { 
            title: 'listCourseA a lot of characters and spaces. | listCourseA a lot of characters and spaces. |listCourseA a lot of characters and spaces. |listCourseA a lot of characters and spaces. |',
            id: 2000,
            description: "job title course a description. has lots of words and hopefully it's multi-lined. | job title course a description. has lots of words and hopefully it's multi-lined. | job title course a description. has lots of words and hopefully it's multi-lined. | job title course a description. has lots of words and hopefully it's multi-lined.",
            thumbnail: thumbnailLink,
            duration: 45,
            tags: ['Stocks'],
          },
          { 
            title: 'listCourseB',
            id: 2001,
            description: '',
            thumbnail: thumbnailLink,
            duration: 120,
            tags: ['Stocks', 'Marketing', 'more tags', 'even more tags', 'even more tags'],
          },
          { 
            title: 'listCourseC',
            id: 2002,
            description: "list course c description",
            thumbnail: thumbnailLink,
            duration: 120,
            tags: ['Literature'],
          },
        ];
        this.departmentCourses = [
          { 
            title: 'departmentCourseA',
            id: 3000,
            description: "department course A description",
            thumbnail: thumbnailLink,
            duration: 220,
            tags: ['Technology', 'Mac OS', 'Efficiency'],
          },
        ];
        this.locationCourses = [
          { 
            title: 'locationCourseA',
            id: 4000,
            description: '',
            thumbnail: thumbnailLink,
            duration: 10020,
            tags: ['Technology', 'Mac OS', 'Efficiency'],
          },
          { 
            title: 'locationCourseB',
            id: 4000,
            description: '',
            thumbnail: thumbnailLink,
            duration: 10020,
            tags: ['Technology', 'Mac OS', 'Efficiency'],
          },
          { 
            title: 'locationCourseC',
            id: 4000,
            description: '',
            thumbnail: thumbnailLink,
            duration: 10020,
            tags: ['Technology', 'Mac OS', 'Efficiency'],
          },
        ];
      }
    }

    window.customElements.define(DiscoveryHome.is, DiscoveryHome);
  </script>
</dom-module>
