<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <!-- <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes"> -->

    <title>Discovery</title>
    <meta name="description" content="Discovery">

    <style>
    </style>

    <script src="https://s.brightspace.com/lib/ifrau/0.24.1/ifrau/client.js"></script>

    <script>
      'use strict';
      (() => {
        window.D2L = window.D2L || {};
        window.D2L.Discovery = window.D2L.Discovery || {};

        window.D2L.frau = window.D2L.frau || {};
        window.D2L.frau.options = window.D2L.frau.options || {};

        var client = window.ifrauclient(this._ifrauclientOptions);
        return client 
          .connect()
          .then(() => {
            return Promise.all([
              client.request('options'),
              client.getService('navigation', '0.1'),
              client.request('valenceHost'),
            ]);
          })
          .then((all) => {
            console.log('>> index frau: finished requests!');
            var setup = {
              client: client,
              options: all[0],
              navigation: all[1],
              valenceHost: all[2],
            };

            Object.assign(window.D2L.frau.options, setup.options);
            window.D2L.frau.client = setup.client;
            window.D2L.frau.navigation = setup.navigation;
            window.D2L.frau.valenceHost = (setup.valenceHost || '').replace(/\/$/, '');

            return setup;
          });
      })();
    </script>

    <script>
      
      /**
      * [polymer-root-path]
      *
      * By default, we set `Polymer.rootPath` to the server root path (`/`).
      * Leave this line unchanged if you intend to serve your app from the root
      * path (e.g., with URLs like `my.domain/` and `my.domain/view1`).
      *
      * If you intend to serve your app from a non-root path (e.g., with URLs
      * like `my.domain/my-app/` and `my.domain/my-app/view1`), edit this line
      * to indicate the path from which you'll be serving, including leading
      * and trailing slashes (e.g., `/my-app/`).
      */
      window.Polymer = {rootPath: '/'};

      // Load and register pre-caching Service Worker
      // if ('serviceWorker' in navigator) {
      //   window.addEventListener('load', function() {
      //     navigator.serviceWorker.register('service-worker.js', {
      //       scope: Polymer.rootPath,
      //     });
      //   });
      // }

      window.ShadyDOM = { force: true };
    </script>

    <!-- Load webcomponents-loader.js to check and load any polyfills your browser needs -->
    <script src="bower_components/webcomponentsjs/webcomponents-loader.js"></script>

    <!-- Load your application shell -->
    <link rel="import" href="src/discovery-app.html">

  </head>
  <body>
    <discovery-app></discovery-app>
    <noscript>
      Please enable JavaScript to view this website.
    </noscript>
    <!-- Built with love using Polymer Starter Kit -->
  </body>
</html>
